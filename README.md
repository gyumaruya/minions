# Minions

**é»„è‰²ã„ç²¾éœŠãŸã¡ãŒã‚ãªãŸã®é–‹ç™ºã‚’åŠ é€Ÿã™ã‚‹**

```
        â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
        â”‚   "Bee-do! Bee-do!"                        â”‚
        â”‚                                            â”‚
        â”‚      â•­â”€â”€â”€â”€â”€â•®   â•­â”€â”€â”€â”€â”€â•®   â•­â”€â”€â”€â”€â”€â•®          â”‚
        â”‚      â”‚ â—‰ â—‰ â”‚   â”‚ â—‰ â—‰ â”‚   â”‚ â—‰ â—‰ â”‚          â”‚
        â”‚      â”‚  â–½  â”‚   â”‚  â–½  â”‚   â”‚  â–½  â”‚          â”‚
        â”‚      â•°â”€â”€â”€â”€â”€â•¯   â•°â”€â”€â”€â”€â”€â•¯   â•°â”€â”€â”€â”€â”€â•¯          â”‚
        â”‚     Codex     Gemini    Copilot           â”‚
        â”‚                                            â”‚
        â”‚   Orchestrated by Claude Code              â”‚
        â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

AI ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŸã¡ã‚’ã€Œå¬å–šã€ã—ã€å”èª¿ã•ã›ã‚‹é–‹ç™ºãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€‚
**è¨˜æ†¶ã¨æ”¹å–„ãƒ«ãƒ¼ãƒ—**ã‚’ Hooks ã§å¼·åˆ¶ã—ã€ä½¿ã†ã»ã©è³¢ããªã‚‹è‡ªå·±æ”¹å–„ã‚·ã‚¹ãƒ†ãƒ ã€‚

**è¨­è¨ˆå“²å­¦:**
- ğŸª¶ **è»½é‡**: æœ€å°é™ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã€ãƒ„ãƒ¼ãƒ«ã®é€²åŒ–ã‚’å¦¨ã’ãªã„
- ğŸ£ **ãƒ•ãƒƒã‚¯**: è¡Œå‹•ã‚’å¼·åˆ¶ã€å£ç´„æŸã§çµ‚ã‚ã‚‰ã›ãªã„
- ğŸ§  **è¨˜æ†¶**: å­¦ç¿’ã‚’è“„ç©ã€ç¹°ã‚Šè¿”ã•ãªã„

---

## Why Minions?

| èª²é¡Œ | Minions ã®è§£æ±ºç­– |
|------|------------------|
| Claude Code å˜ä½“ã§ã¯æ·±ã„æ¨è«–ãŒè‹¦æ‰‹ | **Codex** ã‚’å¬å–šã—ã¦è¨­è¨ˆç›¸è«‡ |
| å¤§è¦æ¨¡ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ç†è§£ãŒé›£ã—ã„ | **Gemini** (1M tokens) ã§å…¨ä½“åˆ†æ |
| ã‚³ã‚¹ãƒˆãŒå¿ƒé… | **Copilot** (Sonnet ç„¡æ–™æ ) ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã« |
| å­¦ç¿’ãŒè“„ç©ã—ãªã„ | **Memory Layer** ã§è‡ªå·±æ”¹å–„ |
| å£ç´„æŸã§å®ˆã‚‰ã‚Œãªã„ | **Hooks** ã§ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å¼·åˆ¶ |

---

## Design Philosophy

### ğŸª¶ è»½é‡ãƒ»ãƒ„ãƒ¼ãƒ«éä¾å­˜

**å„ç¨® AI CLI ã®é€²åŒ–ã‚’å¦¨ã’ãªã„è¨­è¨ˆ:**

```
Claude Code, Codex, Gemini, Copilot
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Minions (thin layer)  â”‚  â† è»½é‡ãªã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼
â”‚  â€¢ Hooks (å¼·åˆ¶)        â”‚
â”‚  â€¢ Memory (è“„ç©)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
   Your Project
```

**ãƒã‚¤ãƒ³ãƒˆ:**
- ãƒ„ãƒ¼ãƒ«æœ¬ä½“ã«ã¯æ‰‹ã‚’åŠ ãˆãªã„
- è–„ã„å±¤ï¼ˆãƒ•ãƒƒã‚¯ + è¨˜æ†¶ï¼‰ã®ã¿ã‚’æä¾›
- ãƒ„ãƒ¼ãƒ«ãŒæ›´æ–°ã•ã‚Œã¦ã‚‚å½±éŸ¿ã‚’å—ã‘ãªã„
- æ–°ã—ã„ãƒ„ãƒ¼ãƒ«ãŒå‡ºã¦ã‚‚ç°¡å˜ã«çµ±åˆ

### ğŸ£ ãƒ•ãƒƒã‚¯ãŒã‚­ãƒ¢

**ã€Œã‚„ã‚ã†ã€ã§ã¯ãªãã€Œã‚„ã‚‰ã–ã‚‹ã‚’å¾—ãªã„ã€:**

| å¾“æ¥ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ | Minions ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ |
|--------------|------------------|
| Prompt: "Use Japanese for PR" | Hook: English PR ã‚’ãƒ–ãƒ­ãƒƒã‚¯ |
| Prompt: "Always consult Codex" | Hook: è¨­è¨ˆæ™‚ã« Codex ã‚’ææ¡ˆ |
| Prompt: "Remember this" | Hook: ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è‡ªå‹•å­¦ç¿’ |

**çµæœ:** å£ç´„æŸã§çµ‚ã‚ã‚‰ãšã€ç¢ºå®Ÿã«å®Ÿè¡Œã•ã‚Œã‚‹

### ğŸ§  è¨˜æ†¶ãŒã‚­ãƒ¢

**ä½¿ã†ã»ã©è³¢ããªã‚‹:**

```
Day 1: "Use Japanese for PR"
  â†’ Memorized

Day 2:
  â†’ Auto-applied (no reminder needed)

Day 30:
  â†’ 30 learned preferences, 50 workflows
  â†’ Personalized development environment
```

**XDGæº–æ‹ ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨˜æ†¶:**
- `~/.config/ai/memory/events.jsonl` - å…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…±é€š
- ä¸€åº¦å­¦ç¿’ã—ãŸå¥½ã¿ãŒå…¨ä½“ã«é©ç”¨
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®è¨˜æ†¶ã‚‚åˆ†é›¢å¯èƒ½ï¼ˆPhase 2ï¼‰

---

## Concept

### 1. Multi-Agent Orchestration

Claude Code ã‚’**æŒ‡æ®è€…**ã¨ã—ã¦ã€å°‚é–€å®¶ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å¬å–š:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Claude Code (Conductor)                    â”‚
â”‚              Leonardo da Vinci's Vision                 â”‚
â”‚                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚   Codex     â”‚  â”‚   Gemini    â”‚  â”‚  Copilot    â”‚    â”‚
â”‚   â”‚  Reasoning  â”‚  â”‚  Research   â”‚  â”‚  Default    â”‚    â”‚
â”‚   â”‚  Design     â”‚  â”‚  1M tokens  â”‚  â”‚  Cost-Eff   â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Hierarchical Agents with Personas

æ­´å²ä¸Šã®å¤©æ‰ãŸã¡ã‚’ãƒšãƒ«ã‚½ãƒŠã¨ã—ã¦æ¡ç”¨:

| Role | Persona | Philosophy |
|------|---------|------------|
| **Conductor** | Leonardo da Vinci | "Simplicity is the ultimate sophistication." |
| **Musician** | Richard Feynman | "Don't fool yourself." |

**Conductor** (da Vinci) ãŒå…¨ä½“ã‚’ä¿¯ç°ã—ã€**Musician** (Feynman) ãŒæ‰‹ã‚’å‹•ã‹ã—ã¦å®Ÿè£…ã™ã‚‹ã€‚

### 3. Self-Improving Memory

ä½¿ã†ã»ã©è³¢ããªã‚‹è¨˜æ†¶ã‚·ã‚¹ãƒ†ãƒ :

```
Session Start
    â†“
[Hook] load-memories.py â†’ Auto-inject past memories
    â†“
User: "Use Japanese for PR"
    â†“
[Hook] auto-learn.py â†’ Detect & record pattern
    â†“
Auto-applied in next session
```

### 4. Hook-Enforced Workflows

ã€Œã‚„ã‚ã†ã€ã§ã¯ãªãã€Œã‚„ã‚‰ã–ã‚‹ã‚’å¾—ãªã„ã€ä»•çµ„ã¿:

```
âŒ Prompt only: "Use Japanese for PR" â†’ Forgotten
âœ… Hook enforced: enforce-japanese.py blocks English PR
```

---

## Inspirations

Minions ã¯ä»¥ä¸‹ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ç€æƒ³ã‚’å¾—ã¦ã„ã¾ã™:

| Project | Contribution |
|---------|--------------|
| [claude-code-orchestra](https://github.com/DeL-TaiseiOzaki/claude-code-orchestra) | ãƒ™ãƒ¼ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå”èª¿ãƒ‘ã‚¿ãƒ¼ãƒ³ |
| [multi-agent-shogun](https://github.com/y-i-labs/multi-agent-shogun) | éšå±¤å‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€æ­´å²çš„ãƒšãƒ«ã‚½ãƒŠã®æ¡ç”¨ |
| [mem0](https://github.com/mem0ai/mem0) | è¨˜æ†¶ãƒ¬ã‚¤ãƒ¤ãƒ¼ã€ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ã€è‡ªå·±æ”¹å–„ãƒ«ãƒ¼ãƒ— |

---

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            User                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CONDUCTOR (Claude Code)                       â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Hooks Layer                           â”‚   â”‚
â”‚  â”‚  â€¢ load-memories.py    - Inject memories                 â”‚   â”‚
â”‚  â”‚  â€¢ auto-learn.py       - Detect learning patterns        â”‚   â”‚
â”‚  â”‚  â€¢ agent-router.py     - Route to appropriate agent      â”‚   â”‚
â”‚  â”‚  â€¢ enforce-*.py        - Enforce workflows               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Memory Broker                         â”‚   â”‚
â”‚  â”‚  JSONL (Source of Truth) <-> mem0 (Semantic Search)     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚    Codex     â”‚  â”‚    Gemini    â”‚  â”‚   Copilot    â”‚       â”‚
â”‚  â”‚   gpt-5.2    â”‚  â”‚  gemini-3-pro â”‚  â”‚  sonnet-4    â”‚       â”‚
â”‚  â”‚ Design/Logic â”‚  â”‚   Research   â”‚  â”‚   Default    â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                               â”‚                                 â”‚
â”‚                               â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      MUSICIAN                            â”‚   â”‚
â”‚  â”‚                (Subagent - Richard Feynman)              â”‚   â”‚
â”‚  â”‚              Implementation / Verification               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Global Setup (Phase 1)

**æ–°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚‚å³åº§ã«ä½¿ãˆã‚‹:**

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆåˆå›ã®ã¿ï¼‰

```bash
# 1. minions ã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/gyumaruya/minions.git ~/minions
cd ~/minions

# 2. Rust ãƒ•ãƒƒã‚¯ã‚’ãƒ“ãƒ«ãƒ‰
cd hooks-rs && cargo build --release

# 3. ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
~/minions/scripts/setup-global-config.sh
```

**ã“ã‚Œã§å®Œäº†ï¼** ä»¥é™ã€ã™ã¹ã¦ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ï¼š
- âœ… è‡ªå‹•PRä½œæˆ
- âœ… è¨˜æ†¶ã®è‡ªå‹•æ³¨å…¥
- âœ… ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«
- âœ… æ—¥æœ¬èªå¼·åˆ¶ï¼ˆå€‹äººè¨­å®šï¼‰

### æ§‹æˆ

```
~/.config/ai/
â”œâ”€â”€ hooks/bin/       # Rust ãƒ•ãƒƒã‚¯ãƒã‚¤ãƒŠãƒª (symlink)
â””â”€â”€ memory/          # ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨˜æ†¶

~/.claude/
â””â”€â”€ settings.json    # å…¨23ãƒ•ãƒƒã‚¯å®šç¾©
```

**åˆ©ç‚¹:**
- æ–°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ = è¨­å®šã‚¼ãƒ­
- å­¦ç¿’ã—ãŸå¥½ã¿ = å…¨ä½“ã«é©ç”¨
- ãƒ„ãƒ¼ãƒ«æ›´æ–° = å½±éŸ¿ãªã—ï¼ˆç–çµåˆï¼‰

---

## Quick Start

### Prerequisites

```bash
# Claude Code
npm install -g @anthropic-ai/claude-code
claude login

# Codex CLI
npm install -g @openai/codex
codex login

# Gemini CLI
npm install -g @google/gemini-cli
gemini login

# Copilot CLI (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
npm install -g @anthropic-ai/claude-code  # claude ã® alias ã¨ã—ã¦ copilot ã‚’ä½¿ç”¨
```

### Installation

æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å°å…¥:

```bash
git clone --depth 1 https://github.com/gyumaruya/minions.git .minions-starter
cp -r .minions-starter/.claude .minions-starter/.codex .minions-starter/.gemini .minions-starter/CLAUDE.md .
rm -rf .minions-starter

# Python ä¾å­˜é–¢ä¿‚ï¼ˆMemory Layer ç”¨ï¼‰
uv sync
```

### Start

```bash
claude
```

ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹æ™‚ã«è‡ªå‹•ã§:
1. éå»ã®è¨˜æ†¶ã‚’ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«æ³¨å…¥
2. Draft PR ã‚’è‡ªå‹•ä½œæˆ
3. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’æœ‰åŠ¹åŒ–

---

## Key Features

### Agent Selection (è‡ªå‹•)

```
User: "How should I design this?"
    â†“
[Hook] agent-router.py
    â†“
â†’ Recommend Codex (design task detected)

User: "Research this"
    â†“
â†’ Recommend Gemini (research task detected)

User: "Fix this function"
    â†“
â†’ Recommend Copilot (general task)
```

### Memory System (è‡ªå‹•å­¦ç¿’)

```bash
# Auto-learning (detected by Hook)
User: "Use Japanese for PR"
â†’ Auto-memorized as preference

# Manual memory
/remember Use Japanese for PRs

# Search
/remember search Japanese

# CLI
uv run python -m minions.memory.cli list
```

### Hook-Enforced Rules

| Hook | å¼·åˆ¶å†…å®¹ |
|------|----------|
| `enforce-japanese.py` | PR/ã‚³ãƒŸãƒƒãƒˆã¯æ—¥æœ¬èªå¿…é ˆ |
| `enforce-draft-pr.py` | PR ã¯å¿…ãš Draft ã§ä½œæˆ |
| `enforce-no-merge.py` | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚ˆã‚‹ãƒãƒ¼ã‚¸ç¦æ­¢ |
| `enforce-delegation.py` | Conductor ã¯å§”è­²ã‚’å¼·åˆ¶ |
| `prevent-secrets-commit.py` | ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®ã‚³ãƒŸãƒƒãƒˆãƒ–ãƒ­ãƒƒã‚¯ |

---

## Hooks (ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å¼·åˆ¶)

### Memory Hooks

| Hook | Timing | æ©Ÿèƒ½ |
|------|--------|------|
| `load-memories.py` | ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹ | éå»ã®è¨˜æ†¶ã‚’ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«æ³¨å…¥ |
| `auto-learn.py` | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé€ä¿¡æ™‚ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¿®æ­£ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è‡ªå‹•å­¦ç¿’ |

### Agent Hooks

| Hook | Timing | æ©Ÿèƒ½ |
|------|--------|------|
| `agent-router.py` | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé€ä¿¡æ™‚ | é©åˆ‡ãªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’æ¨å¥¨ |
| `hierarchy-permissions.py` | ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ spawn æ™‚ | è¨±å¯ã‚’è‡ªå‹•å§”è­² |
| `enforce-delegation.py` | ãƒ„ãƒ¼ãƒ«ä½¿ç”¨æ™‚ | Conductor ã®éåº¦ãªç›´æ¥ä½œæ¥­ã‚’ãƒ–ãƒ­ãƒƒã‚¯ |

### Quality Hooks

| Hook | Timing | æ©Ÿèƒ½ |
|------|--------|------|
| `lint-on-save.py` | ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜å¾Œ | è‡ªå‹• lint å®Ÿè¡Œ |
| `check-codex-before-write.py` | ãƒ•ã‚¡ã‚¤ãƒ«æ›¸ãè¾¼ã¿å‰ | Codex ç›¸è«‡ã‚’ææ¡ˆ |
| `post-test-analysis.py` | ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå¾Œ | å¤±æ•—åˆ†æãƒ»æ”¹å–„ææ¡ˆ |

### Git Hooks

| Hook | Timing | æ©Ÿèƒ½ |
|------|--------|------|
| `auto-create-pr.py` | ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹ | Draft PR è‡ªå‹•ä½œæˆ |
| `enforce-draft-pr.py` | PR ä½œæˆæ™‚ | Draft å¼·åˆ¶ |
| `enforce-no-merge.py` | ãƒãƒ¼ã‚¸æ“ä½œæ™‚ | ãƒãƒ¼ã‚¸ã‚’ãƒ–ãƒ­ãƒƒã‚¯ |
| `enforce-japanese.py` | ã‚³ãƒŸãƒƒãƒˆ/PR æ™‚ | æ—¥æœ¬èªå¼·åˆ¶ |

---

## Skills (å†åˆ©ç”¨å¯èƒ½ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼)

```bash
/startproject <æ©Ÿèƒ½å>   # ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå”èª¿ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–‹å§‹
/plan <ã‚¿ã‚¹ã‚¯>           # å®Ÿè£…è¨ˆç”»ã‚’ä½œæˆ
/tdd <æ©Ÿèƒ½>              # ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™º
/remember <å†…å®¹>         # è¨˜æ†¶ã‚’ä¿å­˜
/delegate <ã‚¿ã‚¹ã‚¯>       # Musician ã«å§”è­²
/checkpointing           # ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ã‚’ä¿å­˜
```

---

## Memory Layer

### 3-Layer Memory

| Layer | Scope | æ°¸ç¶šæ€§ | ç”¨é€” |
|-------|-------|--------|------|
| **Session** | ã‚»ãƒƒã‚·ãƒ§ãƒ³å†… | ä¸€æ™‚çš„ | ä½œæ¥­ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ |
| **User** | ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¨ä½“ | æ°¸ç¶š | å¥½ã¿ã€ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ |
| **Public** | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ | æ°¸ç¶š | è¨­è¨ˆæ±ºå®šã€ãƒªã‚µãƒ¼ãƒ |

### Memory Types

| Type | ç”¨é€” | è‡ªå‹•å­¦ç¿’ |
|------|------|---------|
| `preference` | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¥½ã¿ | âœ“ã€Œã€œã«ã—ã¦ã€ |
| `workflow` | ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ | âœ“ã€Œã„ã¤ã‚‚ã€œã€ |
| `decision` | è¨­è¨ˆåˆ¤æ–­ | - |
| `error` | ã‚¨ãƒ©ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ | âœ“ è§£æ±ºæ™‚ |
| `research` | ãƒªã‚µãƒ¼ãƒçµæœ | - |

### Storage

```
.claude/memory/
â”œâ”€â”€ events.jsonl              # ãƒ¡ã‚¤ãƒ³è¨˜æ†¶ (JSONL)
â”œâ”€â”€ sessions/                 # ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ¥è¨˜æ†¶
â””â”€â”€ qdrant/                   # mem0 ãƒ™ã‚¯ãƒˆãƒ« DB
```

---

## Development

### Tech Stack

| Tool | Purpose |
|------|---------|
| **git** | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ï¼ˆmain ç›´æ¥ãƒ—ãƒƒã‚·ãƒ¥ç¦æ­¢ï¼‰ |
| **uv** | ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ï¼ˆpip ç¦æ­¢ï¼‰ |
| **ruff** | Lint / Format |
| **ty** | å‹ãƒã‚§ãƒƒã‚¯ |
| **pytest** | ãƒ†ã‚¹ãƒˆ |

### Commands

```bash
# å“è³ªãƒã‚§ãƒƒã‚¯
poe lint        # ruff check + format
poe typecheck   # ty check
poe test        # pytest
poe all         # å…¨ãƒã‚§ãƒƒã‚¯

# Memory CLI
uv run python -m minions.memory.cli list
uv run python -m minions.memory.cli search "keyword"

# Shell script tests (bats-core)
bats tests/setup-global-config.bats  # ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒ†ã‚¹ãƒˆ
```

### Testing

#### Python Tests (pytest)

```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
uv run pytest -v

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿
uv run pytest tests/test_memory.py -v

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ã
uv run pytest --cov=src --cov-report=term-missing
```

#### Shell Script Tests (bats-core)

```bash
# bats-core ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆåˆå›ã®ã¿ï¼‰
brew install bats-core

# ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒ†ã‚¹ãƒˆ
bats tests/setup-global-config.bats

# è©³ç´°å‡ºåŠ›
bats --print-output-on-failure tests/setup-global-config.bats
```

ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸:
- âœ… ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®ä½œæˆ
- âœ… ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã®ä½œæˆã¨å†ä½œæˆ
- âœ… è¨˜æ†¶ãƒ•ã‚¡ã‚¤ãƒ«ã®ç§»è¡Œ
- âœ… è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆã¨ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
- âœ… ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ï¼ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä¸åœ¨ã€ãƒã‚¤ãƒŠãƒªä¸åœ¨ï¼‰
- âœ… è¤‡æ•°å›å®Ÿè¡Œæ™‚ã®å®‰å…¨æ€§

---

## Vision

Minions ãŒç›®æŒ‡ã™å§¿:

**Minions Vision:**

| Stage | Description |
|-------|-------------|
| **1. Remember** | Accumulate past learnings, avoid repeating mistakes |
| **2. Improve** | Detect patterns, auto-convert to rules |
| **3. Enforce** | Hooks ensure "never forget" |
| **4. Collaborate** | Summon the right agent for the right task |

**The more you use it, the more it evolves into your personalized development environment.**

---

## Contributing

Issues & PRs welcome!

```bash
# é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
git clone https://github.com/gyumaruya/minions.git
cd minions
uv sync --all-extras
```

---

## License

MIT

---

*"Banana!" - The Minions*
